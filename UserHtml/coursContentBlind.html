<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Course</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="../UserHtml/Css/courseContent.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Righteous&family=Secular+One&display=swap');
        </style>
<link rel="stylesheet" href="../UserHtml/Css/courseContentBlind.css">
</head>
<body>
    <div class="course-container">
        <div class="audio-section">
            <div class="audio-header">
                <h2>Audio Production Masterclass</h2>
                <div class="current-chapter">Chapter 3: Mixing Techniques</div>
            </div>

            <div class="audio-visualizer" id="visualizer">
                <!-- Audio bars will be generated by JavaScript -->
            </div>

            <div class="audio-controls">
                <button class="control-btn" id="prev-btn">
                    <i class="fas fa-step-backward"></i>
                </button>
                
                <div class="main-controls">
                    <div class="progress-container" id="progress-container">
                        <div class="progress-bar" id="progress-bar">
                            <div class="progress-handle"></div>
                        </div>
                    </div>
                    <div class="time-display">
                        <span id="current-time">0:00</span>
                        <span id="duration">0:00</span>
                    </div>
                </div>

                <button class="control-btn" id="play-btn">
                    <i class="fas fa-play"></i>
                </button>
            </div>

            <div class="chapter-list" id="chapter-list">
            </div>

            <audio id="audio-player"></audio>
        </div>

        <div class="course-sidebar">
            <div class="sidebar-header">
                <h3>Course Content</h3>
                <span class="progress-text">35% Complete</span>
            </div>

            <div class="course-modules">
                <div class="module-card active">
                    <div class="module-header">
                        <h4>Module 1: Foundations</h4>
                        <span>2/5 Lessons</span>
                    </div>
                    <div class="lesson-list">
                        <div class="lesson-item completed">
                            <div class="lesson-thumbnail">
                                <i class="fas fa-check"></i>
                            </div>
                            <span>Course Orientation</span>
                            <span class="lesson-duration">10:00</span>
                        </div>
                        <div class="lesson-item active">
                            <div class="lesson-thumbnail">
                                <i class="fas fa-play"></i>
                            </div>
                            <span>Audio Basics</span>
                            <span class="lesson-duration">22:30</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const audioPlayer = document.getElementById('audio-player');
        const playBtn = document.getElementById('play-btn');
        const prevBtn = document.getElementById('prev-btn');
        const progressContainer = document.getElementById('progress-container');
        const progressBar = document.getElementById('progress-bar');
        const currentTimeEl = document.getElementById('current-time');
        const durationEl = document.getElementById('duration');
        const visualizer = document.getElementById('visualizer');
        const chapterList = document.getElementById('chapter-list');

        // Sample Audio Data
        const chapters = [
            { title: "Introduction to Sound Design", duration: "15:30", src: "audio/chapter1.mp3" },
            { title: "Digital Audio Basics", duration: "22:45", src: "audio/chapter2.mp3" },
            { title: "Mixing Techniques", duration: "18:20", src: "audio/chapter3.mp3" },
            { title: "Advanced Effects", duration: "25:10", src: "audio/chapter4.mp3" },
            { title: "Final Project", duration: "30:00", src: "audio/chapter5.mp3" }
        ];

        let currentChapter = 0;
        let isPlaying = false;

        function initVisualizer() {
            visualizer.innerHTML = '';
            for (let i = 0; i < 50; i++) {
                const bar = document.createElement('div');
                bar.className = 'audio-bar';
                visualizer.appendChild(bar);
            }
        }

        // Update Visualizer
        function updateVisualizer() {
            const bars = document.querySelectorAll('.audio-bar');
            bars.forEach(bar => {
                const height = Math.random() * 100;
                bar.style.height = `${height}%`;
                bar.style.opacity = 0.3 + (height / 100 * 0.7);
            });
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
        }

        function updateProgress() {
            const { duration, currentTime } = audioPlayer;
            const progressPercent = (currentTime / duration) * 100;
            progressBar.style.width = `${progressPercent}%`;
            currentTimeEl.textContent = formatTime(currentTime);
        }

        function setProgress(e) {
            const width = this.clientWidth;
            const clickX = e.offsetX;
            const duration = audioPlayer.duration;
            audioPlayer.currentTime = (clickX / width) * duration;
        }

        function loadChapter(index) {
            currentChapter = index;
            audioPlayer.src = chapters[index].src;
            document.querySelector('.current-chapter').textContent = `Chapter ${index + 1}: ${chapters[index].title}`;
            
            document.querySelectorAll('.chapter-item').forEach((item, i) => {
                item.classList.toggle('active', i === index);
                item.classList.toggle('completed', i < index);
            });
            
            if (isPlaying) {
                audioPlayer.play();
            }
        }

        function togglePlay() {
            if (isPlaying) {
                audioPlayer.pause();
                playBtn.innerHTML = '<i class="fas fa-play"></i>';
            } else {
                audioPlayer.play();
                playBtn.innerHTML = '<i class="fas fa-pause"></i>';
            }
            isPlaying = !isPlaying;
        }

        function prevChapter() {
            currentChapter = (currentChapter - 1 + chapters.length) % chapters.length;
            loadChapter(currentChapter);
        }

        function nextChapter() {
            currentChapter = (currentChapter + 1) % chapters.length;
            loadChapter(currentChapter);
        }

        function initChapters() {
            chapterList.innerHTML = '';
            chapters.forEach((chapter, index) => {
                const chapterEl = document.createElement('div');
                chapterEl.className = `chapter-item ${index === currentChapter ? 'active' : ''}`;
                chapterEl.innerHTML = `
                    <div class="chapter-number">${index + 1}</div>
                    <div class="chapter-title">${chapter.title}</div>
                    <div class="chapter-duration">${chapter.duration}</div>
                `;
                chapterEl.addEventListener('click', () => loadChapter(index));
                chapterList.appendChild(chapterEl);
            });
        }

        playBtn.addEventListener('click', togglePlay);
        prevBtn.addEventListener('click', prevChapter);
        progressContainer.addEventListener('click', setProgress);
        audioPlayer.addEventListener('timeupdate', updateProgress);
        audioPlayer.addEventListener('ended', nextChapter);
        audioPlayer.addEventListener('loadedmetadata', () => {
            durationEl.textContent = formatTime(audioPlayer.duration);
        });

        let visualizerInterval;
        audioPlayer.addEventListener('play', () => {
            visualizerInterval = setInterval(updateVisualizer, 100);
        });
        audioPlayer.addEventListener('pause', () => {
            clearInterval(visualizerInterval);
        });
        audioPlayer.addEventListener('ended', () => {
            clearInterval(visualizerInterval);
        });

        initVisualizer();
        initChapters();
        loadChapter(0);
                document.querySelectorAll('.module-header').forEach(header => {
                    header.addEventListener('click', () => {
                        const module = header.parentElement;
                        const lessonList = module.querySelector('.lesson-list');
                        lessonList.style.maxHeight = lessonList.style.maxHeight ? null : `${lessonList.scrollHeight}px`;
                        module.classList.toggle('active');
                    });
                });
        
                const video = document.getElementById('course-video');
                video.addEventListener('play', () => {
                    document.querySelector('.lesson-item.active .lesson-thumbnail i')
                        .classList.replace('fa-play', 'fa-pause');
                });
        
                video.addEventListener('pause', () => {
                    document.querySelector('.lesson-item.active .lesson-thumbnail i')
                        .classList.replace('fa-pause', 'fa-play');
                });
                
    </script>
</body>
</html>